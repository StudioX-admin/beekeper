<!DOCTYPE html>
<html>
<head>
  <title>Test Registration</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 500px; margin: 0 auto; padding: 20px; }
    .form-group { margin-bottom: 15px; }
    label { display: block; margin-bottom: 5px; }
    input { width: 100%; padding: 8px; box-sizing: border-box; }
    button { padding: 10px 15px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Test Registration Form</h1>
  
  <form name="register" method="POST" data-netlify="true">
    <div class="form-group">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" required>
    </div>
    
    <div class="form-group">
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>
    </div>
    
    <div class="form-group">
      <label for="password">Password:</label>
      <input type="password" id="password" name="password" required>
    </div>
    
    <button type="submit">Register (Netlify Form)</button>
  </form>
  
  <hr>
  
  <h2>Register with Direct API Call</h2>
  <div class="form-group">
    <label for="api-name">Name:</label>
    <input type="text" id="api-name">
  </div>
  
  <div class="form-group">
    <label for="api-email">Email:</label>
    <input type="email" id="api-email">
  </div>
  
  <div class="form-group">
    <label for="api-password">Password:</label>
    <input type="password" id="api-password">
  </div>
  
  <button onclick="registerDirectly()">Register (Direct API)</button>
  
  <div id="result" style="margin-top: 20px; padding: 10px; background-color: #f5f5f5;"></div>
  
  <script>
    function registerDirectly() {
      const name = document.getElementById('api-name').value;
      const email = document.getElementById('api-email').value;
      const password = document.getElementById('api-password').value;
      
      if (!name || !email || !password) {
        document.getElementById('result').innerHTML = 'Please fill in all fields';
        return;
      }
      
      document.getElementById('result').innerHTML = 'Sending registration request...';
      
      fetch('https://beekeper-d0e3.onrender.com/api/auth/register', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          name: name,
          email: email,
          password: password
        })
      })
      .then(response => {
        document.getElementById('result').innerHTML = 
          'Status: ' + response.status + '<br>' +
          'Registration ' + (response.ok ? 'successful!' : 'failed.');
        return response.json().catch(() => null);
      })
      .then(data => {
        if (data) {
          document.getElementById('result').innerHTML += '<br>Response: ' + JSON.stringify(data);
        }
      })
      .catch(error => {
        document.getElementById('result').innerHTML = 
          'Error: ' + error.message + '<br>Registration failed.';
      });
    }
  </script>
</body>
</html>
